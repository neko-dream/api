[tools]
"go:github.com/ogen-go/ogen/cmd/ogen" = "1.14.0"
"go:github.com/air-verse/air" = "latest"
"go:github.com/sqlc-dev/sqlc/cmd/sqlc" = "latest"
"go:go.uber.org/mock/mockgen" = "latest"
"go:github.com/hedhyw/otelinji/cmd/otelinji" = "latest"
"go:github.com/k1LoW/runn/cmd/runn" = "latest"
"go:github.com/dmarkham/enumer" = "latest"
"go:github.com/deepmap/oapi-codegen/v2/cmd/oapi-codegen" = "v2.2.0"
"npm:@openapitools/openapi-generator-cli" = "latest"
"npm:@typespec/compiler" = "latest"
go = "1.24.3"
jq = "latest"
ecspresso = "latest"
task = "latest"

[tasks.migrate-create]
description = "Create a new migration file"
run = "./scripts/migrate-create.sh "

[tasks.migrate-up]
description = "Run all migrations"
env = { DB_URL = "postgres://kotohiro:kotohiro@localhost:5432/kotohiro?sslmode=disable" }
run = "migrate -path migrations -database \"$DB_URL\" up"

[tasks.migrate-down]
description = "Rollback last migration"
env = { DB_URL = "postgres://kotohiro:kotohiro@localhost:5432/kotohiro?sslmode=disable" }
run = "migrate -path migrations -database \"$DB_URL\" down 1"

[tasks.migrate-status]
description = "Show migration status"
env = { DB_URL = "postgres://kotohiro:kotohiro@localhost:5432/kotohiro?sslmode=disable" }
run = "migrate -path migrations -database \"$DB_URL\" version"
