openapi: 3.0.0
info:
  title: Kotohiro API
  version: 1.0.0
tags:
  - name: auth
  - name: user
  - name: opinion
  - name: vote
  - name: talk_session
  - name: timeline
  - name: organization
  - name: policy
  - name: image
  - name: test
  - name: health
  - name: manage
paths:
  /auth/dev/detach:
    delete:
      operationId: authAccountDetach
      summary: '**開発用** 現在のアカウントを切り離す'
      description: そのアカウントには再度ログインできなくなります。ログインしたければ言ってね！
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          headers:
            Set-Cookie:
              required: false
              schema:
                type: array
                items:
                  type: string
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/dev/login:
    get:
      operationId: devAuthorize
      summary: 開発用登録/ログイン
      parameters:
        - name: redirectURL
          in: query
          required: true
          schema:
            type: string
        - name: id
          in: query
          required: true
          description: devのみで使用するsubjectです。ここで指定した値はログインした後も確認できないため覚えておいてください。同じ値を指定すると同じアカウントにログインできます。
          schema:
            type: string
        - name: organizationCode
          in: query
          required: false
          description: 組織コード（組織ログインの場合）
          schema:
            type: string
      responses:
        '302':
          description: Redirection
          headers:
            Location:
              required: false
              schema:
                type: string
            Set-Cookie:
              required: false
              schema:
                type: array
                items:
                  type: string
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/organization/{code}/validate:
    get:
      operationId: validateOrganizationCode
      summary: 組織コード検証
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                  organization:
                    $ref: '#/components/schemas/Organization'
                required:
                  - valid
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      security:
        - {}
      x-ogen-operation-group: Organization
  /auth/password/change:
    put:
      operationId: changePassword
      summary: パスワード変更
      parameters:
        - name: oldPassword
          in: query
          required: true
          description: 古いパスワード
          schema:
            type: string
        - name: newPassword
          in: query
          required: true
          description: 新たなパスワード
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      x-ogen-operation-group: Auth
  /auth/password/login:
    post:
      operationId: passwordLogin
      summary: パスワードによるログイン
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                idOrEmail:
                  type: string
                password:
                  type: string
              required:
                - idOrEmail
                - password
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/password/register:
    post:
      operationId: passwordRegister
      summary: パスワードによる登録（devのみ）
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                id:
                  type: string
                password:
                  type: string
                email:
                  type: string
              required:
                - id
                - password
                - email
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/revoke:
    post:
      operationId: revokeToken
      summary: トークンを失効（ログアウト）
      parameters: []
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
          headers:
            Set-Cookie:
              required: true
              description: Cookie削除用のSet-Cookie
              schema:
                type: array
                items:
                  type: string
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/token/info:
    get:
      operationId: getTokenInfo
      summary: JWTの内容を返してくれる
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenClaim'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - auth
      x-ogen-operation-group: Auth
  /auth/{provider}/callback:
    get:
      operationId: handleAuthCallback
      summary: Auth Callback
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
        - name: code
          in: query
          required: true
          schema:
            type: string
        - name: state
          in: query
          required: true
          description: OAuth State from Query
          schema:
            type: string
      responses:
        '302':
          description: Redirection
          headers:
            Location:
              required: true
              schema:
                type: string
            Set-Cookie:
              required: true
              description: SessionID
              schema:
                type: array
                items:
                  type: string
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      security:
        - {}
      x-ogen-operation-group: Auth
  /auth/{provider}/login:
    get:
      operationId: authorize
      summary: ログイン
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum:
              - google
              - line
        - name: redirectURL
          in: query
          required: true
          description: ログイン後にリダイレクトするURL
          schema:
            type: string
        - name: organizationCode
          in: query
          required: false
          description: 組織コード（組織ログインの場合）
          schema:
            type: string
        - name: registrationURL
          in: query
          required: false
          description: 登録していなかった場合に飛ばすURL
          schema:
            type: string
      responses:
        '302':
          description: Redirection
          headers:
            Location:
              required: true
              description: IDPのログインページ
              schema:
                type: string
            Set-Cookie:
              required: false
              description: OAuth2.0 State
              schema:
                type: array
                items:
                  type: string
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - auth
      security:
        - {}
      x-ogen-operation-group: Auth
  /health:
    get:
      operationId: health
      summary: ヘルスチェック
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - health
      security:
        - {}
      x-ogen-operation-group: Health
  /images:
    post:
      operationId: postImage
      summary: 画像投稿
      description: 画像を投稿してURLを返すAPI
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  url:
                    type: string
                required:
                  - url
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - image
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
              required:
                - image
      x-ogen-operation-group: Image
  /opinions:
    post:
      operationId: postOpinionPost2
      summary: セッションに対して意見投稿 or 意見に対するリプライ
      description: |-
        parentOpinionIDがなければルートの意見として投稿される
        parentOpinionIDがない場合はtalkSessionIDが必須

        セッション管理者はisSeedをtrueにするとシード意見として投稿できる
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - opinion
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                talkSessionID:
                  type: string
                  nullable: true
                parentOpinionID:
                  type: string
                  nullable: true
                title:
                  type: string
                  nullable: true
                opinionContent:
                  type: string
                referenceURL:
                  type: string
                  nullable: true
                picture:
                  type: string
                  format: binary
                isSeed:
                  type: boolean
                  nullable: true
              required:
                - opinionContent
            encoding:
              talkSessionID:
                contentType: application/json
              parentOpinionID:
                contentType: application/json
              title:
                contentType: application/json
              referenceURL:
                contentType: application/json
              isSeed:
                contentType: application/json
      x-ogen-operation-group: Opinion
  /opinions/histories:
    get:
      operationId: opinionsHistory
      summary: 今までに投稿した意見
      parameters:
        - name: sort
          in: query
          required: false
          description: ソートきー
          schema:
            type: string
            enum:
              - latest
              - mostReplies
              - oldest
            nullable: true
        - name: limit
          in: query
          required: false
          schema:
            type: integer
        - name: offset
          in: query
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  opinions:
                    type: array
                    items:
                      $ref: '#/components/schemas/OpinionWithReplyCount'
                  pagination:
                    type: object
                    properties:
                      totalCount:
                        type: integer
                    required:
                      - totalCount
                required:
                  - opinions
                  - pagination
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - user
      x-ogen-operation-group: User
  /opinions/report_reasons:
    get:
      operationId: getOpinionReportReasons
      summary: 意見への通報理由一覧
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ReportReason'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}:
    get:
      operationId: getOpinionDetail2
      summary: 意見詳細
      parameters:
        - name: opinionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpinionWithVote'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/analysis:
    get:
      operationId: getOpinionAnalysis
      summary: 意見に投票したグループごとの割合
      parameters:
        - name: opinionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/OpinionGroupRatio'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/replies:
    get:
      operationId: opinionComments2
      summary: 意見に対するリプライ意見一覧
      parameters:
        - name: opinionID
          in: path
          required: true
          description: 親意見のID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  opinions:
                    type: array
                    items:
                      $ref: '#/components/schemas/OpinionWithVote'
                required:
                  - opinions
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/report:
    post:
      operationId: reportOpinion
      summary: 意見通報API
      parameters:
        - name: opinionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                reason:
                  type: integer
                  nullable: true
                content:
                  type: string
                  nullable: true
              required: []
            encoding:
              reason:
                contentType: application/json
              content:
                contentType: application/json
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/reports:
    get:
      operationId: getOpinionReports
      summary: 意見に対する通報取得
      description: セッション作成者しか取得できない
      parameters:
        - name: opinionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportDetail'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/reports/solve:
    post:
      operationId: solveOpinionReport
      summary: 通報を解決
      parameters:
        - name: opinionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                action:
                  $ref: '#/components/schemas/ReportAction'
              required:
                - action
            encoding:
              action:
                contentType: application/json
      x-ogen-operation-group: Opinion
  /opinions/{opinionID}/votes:
    post:
      operationId: vote2
      summary: 意思表明API
      parameters:
        - name: opinionID
          in: path
          required: true
          description: 意見のID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Opinion'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - vote
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                voteStatus:
                  allOf:
                    - $ref: '#/components/schemas/VoteType'
                  nullable: true
              required:
                - voteStatus
            encoding:
              voteStatus:
                contentType: application/json
      x-ogen-operation-group: Vote
  /organizations:
    get:
      operationId: getOrganizations
      summary: 所属組織一覧
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  organizations:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'
                required:
                  - organizations
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      x-ogen-operation-group: Organization
    post:
      operationId: establishOrganization
      summary: 組織作成（運営ユーザーのみ）
      description: |-
        組織を作成できる。
        これを作れるユーザーはDBを直接叩いて作るしかない。
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                code:
                  type: string
                  description: |-
                    組織コード（ログイン時に使用）
                    4文字以上127文字以下の英数字 _- のみ使用可能
                orgType:
                  type: number
                  description: |-
                    組織タイプ
                    - 1: 通常（基本これ）
              required:
                - name
                - code
                - orgType
      x-ogen-operation-group: Organization
  /organizations/{organizationID}/aliases:
    get:
      operationId: getOrganizationAliases
      summary: 組織エイリアス一覧取得
      parameters:
        - name: organizationID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  aliases:
                    type: array
                    items:
                      type: object
                      properties:
                        aliasID:
                          type: string
                        aliasName:
                          type: string
                        createdAt:
                          type: string
                      required:
                        - aliasID
                        - aliasName
                        - createdAt
                required:
                  - aliases
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      x-ogen-operation-group: Organization
    post:
      operationId: createOrganizationAlias
      summary: 組織エイリアス作成
      parameters:
        - name: organizationID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  aliasID:
                    type: string
                  aliasName:
                    type: string
                  createdAt:
                    type: string
                required:
                  - aliasID
                  - aliasName
                  - createdAt
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                aliasName:
                  type: string
              required:
                - aliasName
      x-ogen-operation-group: Organization
  /organizations/{organizationID}/aliases/{aliasID}:
    delete:
      operationId: deleteOrganizationAlias
      summary: 組織エイリアス削除
      parameters:
        - name: organizationID
          in: path
          required: true
          schema:
            type: string
        - name: aliasID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      x-ogen-operation-group: Organization
  /organizations/{organizationID}/invite:
    post:
      operationId: inviteOrganization
      summary: 組織ユーザー招待（運営ユーザーのみ）
      description: |-
        Role
        - 10: SuperAdmin
        - 20: Owner
        - 30: Admin
        - 40: Member
      parameters:
        - name: organizationID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                role:
                  type: number
              required:
                - email
                - role
      x-ogen-operation-group: Organization
  /organizations/{organizationID}/invite_user:
    post:
      operationId: inviteOrganizationForUser
      summary: 組織にユーザーを追加
      parameters:
        - name: organizationID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                required:
                  - success
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - organization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                displayID:
                  type: string
                role:
                  type: number
              required:
                - displayID
                - role
      x-ogen-operation-group: Organization
  /policy/consent:
    get:
      operationId: getPolicyConsentStatus
      summary: 最新のポリシーに同意したかを取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyConsentStatus'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - policy
      security:
        - {}
      x-ogen-operation-group: Policy
    post:
      operationId: policyConsent
      summary: 最新のポリシーに同意する
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyConsentStatus'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - policy
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                policyVersion:
                  type: string
              required:
                - policyVersion
      x-ogen-operation-group: Policy
  /talksessions:
    get:
      operationId: getTalkSessionList
      summary: セッション一覧
      parameters:
        - name: limit
          in: query
          required: false
          description: 1ページあたりの要素数
          schema:
            type: integer
            nullable: true
        - name: offset
          in: query
          required: false
          description: どの要素から始めるか
          schema:
            type: integer
            nullable: true
        - name: theme
          in: query
          required: false
          schema:
            type: string
            nullable: true
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - open
              - finished
            nullable: true
            default: open
        - name: sortKey
          in: query
          required: false
          schema:
            type: string
            enum:
              - latest
              - oldest
              - mostReplies
              - nearest
        - name: latitude
          in: query
          required: false
          schema:
            type: number
            nullable: true
        - name: longitude
          in: query
          required: false
          schema:
            type: number
            nullable: true
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  talkSessions:
                    type: array
                    items:
                      type: object
                      properties:
                        talkSession:
                          $ref: '#/components/schemas/TalkSession'
                        opinionCount:
                          type: integer
                      required:
                        - talkSession
                        - opinionCount
                  pagination:
                    $ref: '#/components/schemas/OffsetPagination'
                required:
                  - talkSessions
                  - pagination
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
    post:
      operationId: initiateTalkSession
      summary: セッション作成
      description: |-
        ## サムネイル画像について
        - `Description中に出てくる画像で一番最初のものを使用`。
        - 画像自体は`POST /images`でサーバにポストしたものを使用してください。

        ## 投稿制限のキーについて
        restrictionsに値を入れると一定のデモグラ情報を登録していない限り、セッションへの投稿が制限されるようにできる。
        restrictionsには [GET /talksessions/restrictions](https://app.apidog.com/link/project/674502/apis/api-14271260) より取れるkeyをカンマ区切りで入力してください。
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkSession'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - talk_session
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                theme:
                  type: string
                scheduledEndTime:
                  type: string
                  format: date-time
                latitude:
                  type: number
                  nullable: true
                longitude:
                  type: number
                  nullable: true
                city:
                  type: string
                  nullable: true
                prefecture:
                  type: string
                  nullable: true
                description:
                  type: string
                  nullable: true
                thumbnailURL:
                  type: string
                  nullable: true
                restrictions:
                  type: array
                  items:
                    type: string
                organizationAliasID:
                  type: string
                  nullable: true
              required:
                - theme
                - scheduledEndTime
            encoding:
              latitude:
                contentType: application/json
              longitude:
                contentType: application/json
              city:
                contentType: application/json
              prefecture:
                contentType: application/json
              description:
                contentType: application/json
              thumbnailURL:
                contentType: application/json
              restrictions:
                contentType: application/json
              organizationAliasID:
                contentType: application/json
      x-ogen-operation-group: TalkSession
  /talksessions/histories:
    get:
      operationId: sessionsHistory
      summary: リアクション済みのセッション一覧
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
        - name: offset
          in: query
          required: false
          schema:
            type: integer
        - name: theme
          in: query
          required: false
          description: テーマ
          schema:
            type: string
            nullable: true
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - open
              - finished
            nullable: true
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  pagination:
                    $ref: '#/components/schemas/OffsetPagination'
                  talkSessions:
                    type: array
                    items:
                      type: object
                      properties:
                        talkSession:
                          $ref: '#/components/schemas/TalkSession'
                        opinionCount:
                          type: integer
                      required:
                        - talkSession
                        - opinionCount
                required:
                  - pagination
                  - talkSessions
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - user
      x-ogen-operation-group: User
  /talksessions/opened:
    get:
      operationId: getOpenedTalkSession
      summary: 自分が開いたセッション一覧
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
        - name: offset
          in: query
          required: false
          schema:
            type: integer
        - name: theme
          in: query
          required: false
          description: テーマ
          schema:
            type: string
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - finished
              - open
            nullable: true
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  talkSessions:
                    type: array
                    items:
                      type: object
                      properties:
                        talkSession:
                          $ref: '#/components/schemas/TalkSession'
                        opinionCount:
                          type: integer
                      required:
                        - talkSession
                        - opinionCount
                required:
                  - talkSessions
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      x-ogen-operation-group: TalkSession
  /talksessions/restrictions:
    get:
      operationId: getTalkSessionRestrictionKeys
      summary: セッションで指定可能な制限一覧
      description: セッションの投稿制限に使用できるキーの一覧を返す
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Restriction'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}:
    get:
      operationId: getTalkSessionDetail
      summary: トークセッションの詳細
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkSession'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
    put:
      operationId: editTalkSession
      summary: セッション編集
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkSession'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                theme:
                  type: string
                scheduledEndTime:
                  type: string
                  format: date-time
                latitude:
                  type: number
                  nullable: true
                longitude:
                  type: number
                prefecture:
                  type: string
                  nullable: true
                city:
                  type: string
                  nullable: true
                description:
                  type: string
                  nullable: true
                thumbnailURL:
                  type: string
              required:
                - theme
                - scheduledEndTime
            encoding:
              latitude:
                contentType: application/json
              prefecture:
                contentType: application/json
              city:
                contentType: application/json
              description:
                contentType: application/json
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/analysis:
    get:
      operationId: talkSessionAnalysis
      summary: 分析結果一覧
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  myPosition:
                    $ref: '#/components/schemas/UserGroupPosition'
                  positions:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserGroupPosition'
                  groupOpinions:
                    type: array
                    items:
                      type: object
                      properties:
                        groupName:
                          type: string
                        groupID:
                          type: integer
                        opinions:
                          type: array
                          items:
                            type: object
                            properties:
                              opinion:
                                $ref: '#/components/schemas/Opinion'
                              user:
                                $ref: '#/components/schemas/User'
                              agreeCount:
                                type: integer
                              disagreeCount:
                                type: integer
                              passCount:
                                type: integer
                            required:
                              - opinion
                              - user
                              - agreeCount
                              - disagreeCount
                              - passCount
                      required:
                        - groupName
                        - groupID
                        - opinions
                required:
                  - positions
                  - groupOpinions
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/conclusion:
    get:
      operationId: getConclusion
      summary: 結論取得
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conclusion'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
    post:
      operationId: postConclusion
      summary: 結論投稿
      description: |-
        結論（conclusion）はセッションが終了した後にセッっションの作成者が投稿できる文章。
        セッションの流れやグループの分かれ方などに対するセッション作成者の感想やそれらの意見を受け、これからの方向性などを記入する。
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conclusion'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: string
              required:
                - content
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/consent:
    get:
      operationId: hasConsent
      summary: セッションに同意しているか
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  hasConsent:
                    type: boolean
                required:
                  - hasConsent
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
    post:
      operationId: consentTalkSession
      summary: セッションへの同意
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/opinions:
    get:
      operationId: getOpinionsForTalkSession
      summary: セッションに対する意見一覧
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
        - name: sort
          in: query
          required: false
          schema:
            type: string
            enum:
              - latest
              - mostReplies
              - oldest
            nullable: true
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            nullable: true
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            nullable: true
        - name: seed
          in: query
          required: false
          schema:
            type: boolean
            nullable: true
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  opinions:
                    type: array
                    items:
                      $ref: '#/components/schemas/OpinionWithReplyAndVote'
                  pagination:
                    type: object
                    properties:
                      totalCount:
                        type: integer
                    required:
                      - totalCount
                required:
                  - opinions
                  - pagination
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /talksessions/{talkSessionID}/report:
    get:
      operationId: getTalkSessionReport
      summary: セッションレポートを返す
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  report:
                    type: string
                    nullable: true
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/reports:
    get:
      operationId: getReportsForTalkSession
      summary: 通報一覧
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - unsolved
              - deleted
              - hold
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  reports:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReportDetail'
                required:
                  - reports
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/reports/count:
    get:
      operationId: getTalkSessionReportCount
      summary: 通報件数
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
        - name: status
          in: query
          required: true
          schema:
            type: string
            enum:
              - unsolved
              - deleted
              - hold
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                required:
                  - count
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/restrictions:
    get:
      operationId: getTalkSessionRestrictionSatisfied
      summary: セッションで満たしていない制限
      description: 特定のセッションで満たしていない条件があれば返す
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Restriction'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - talk_session
      security:
        - {}
      x-ogen-operation-group: TalkSession
  /talksessions/{talkSessionID}/swipe_opinions:
    get:
      operationId: swipeOpinions
      summary: スワイプ用のエンドポイント
      description: |-
        セッションの中からまだ投票していない意見をランダムに取得する
        remainingCountは取得した意見を含めてスワイプできる意見の総数を返す
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            nullable: true
            default: 10
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  opinions:
                    type: array
                    items:
                      $ref: '#/components/schemas/OpinionWithReplyCount'
                  remainingCount:
                    type: integer
                required:
                  - opinions
                  - remainingCount
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - opinion
      security:
        - {}
      x-ogen-operation-group: Opinion
  /talksessions/{talkSessionID}/timeline:
    post:
      operationId: postTimeLineItem
      summary: タイムラインアイテム追加
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  actionItemID:
                    type: string
                  sequence:
                    type: integer
                  content:
                    type: string
                  status:
                    type: string
                  createdAt:
                    type: string
                  updatedAt:
                    type: string
                required:
                  - actionItemID
                  - sequence
                  - content
                  - status
                  - createdAt
                  - updatedAt
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - timeline
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: string
                status:
                  type: string
                parentActionItemID:
                  type: string
                  nullable: true
              required:
                - content
                - status
            encoding:
              parentActionItemID:
                contentType: application/json
      x-ogen-operation-group: Timeline
  /talksessions/{talkSessionID}/timelines:
    get:
      operationId: getTimeLine
      summary: タイムライン取得
      description: タイムラインはセッション終了後にセッション作成者が設定できるその後の予定を知らせるもの
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ActionItem'
                required:
                  - items
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - timeline
      security:
        - {}
      x-ogen-operation-group: Timeline
  /talksessions/{talkSessionID}/timelines/{actionItemID}:
    put:
      operationId: editTimeLine
      summary: タイムライン編集
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
        - name: actionItemID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ActionItem'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - timeline
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: string
                  nullable: true
                status:
                  type: string
                  nullable: true
              required: []
            encoding:
              content:
                contentType: application/json
              status:
                contentType: application/json
      x-ogen-operation-group: Timeline
  /test:
    get:
      operationId: test
      summary: OpenAPIテスト用
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  optInt:
                    type: integer
                    nullable: true
                  optNilInt:
                    type: integer
                  optNilBool:
                    type: boolean
                    nullable: true
                  optBool:
                    type: boolean
                  optUrl:
                    type: string
                    format: uri
                  optNilUrl:
                    type: string
                    nullable: true
                    format: url
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - user
      security:
        - {}
      x-ogen-operation-group: test
  /test/dummy:
    post:
      operationId: dummiInit
      summary: mudai
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - test
      security:
        - {}
      x-ogen-operation-group: Test
  /user:
    get:
      operationId: getUserInfo
      summary: ユーザー情報の取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
                  demographics:
                    $ref: '#/components/schemas/UserDemographics'
                  email:
                    type: string
                    nullable: true
                required:
                  - user
                  - demographics
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
      tags:
        - user
      x-ogen-operation-group: User
    post:
      operationId: establishUser
      summary: ユーザー作成
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - user
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                displayName:
                  type: string
                displayID:
                  type: string
                icon:
                  type: string
                  format: binary
                dateOfBirth:
                  type: string
                gender:
                  type: string
                  enum:
                    - 男性
                    - 女性
                    - その他
                    - 回答しない
                  nullable: true
                prefecture:
                  type: string
                city:
                  type: string
                  nullable: true
                email:
                  type: string
                  nullable: true
              required:
                - displayName
                - displayID
            encoding:
              gender:
                contentType: application/json
              city:
                contentType: application/json
              email:
                contentType: application/json
      x-ogen-operation-group: user
    put:
      operationId: updateUserProfile
      summary: ユーザー情報の変更
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
                required:
                  - code
                  - message
      tags:
        - user
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                displayName:
                  type: string
                  nullable: true
                icon:
                  type: string
                  format: binary
                deleteIcon:
                  type: boolean
                  nullable: true
                dateOfBirth:
                  type: string
                gender:
                  type: string
                  enum:
                    - 男性
                    - 女性
                    - その他
                    - 回答しない
                  nullable: true
                city:
                  type: string
                  nullable: true
                prefecture:
                  type: string
                  nullable: true
                email:
                  type: string
                  nullable: true
              required: []
            encoding:
              displayName:
                contentType: application/json
              deleteIcon:
                contentType: application/json
              gender:
                contentType: application/json
              city:
                contentType: application/json
              prefecture:
                contentType: application/json
              email:
                contentType: application/json
      x-ogen-operation-group: user
  /v1/manage/talksessions/list:
    get:
      operationId: getTalkSessionListManage
      parameters:
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - active
              - inactive
          explode: false
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkSessionListResponse'
      tags:
        - manage
      x-ogen-operation-group: manage
  /v1/manage/talksessions/{talkSessionID}:
    get:
      operationId: getTalkSessionManage
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TalkSessionForManage'
      tags:
        - manage
      x-ogen-operation-group: manage
  /v1/manage/talksessions/{talkSessionID}/analysis/regenerate:
    post:
      operationId: manageRegenerateManage
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegenerateResponse'
      tags:
        - manage
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/RegenerateRequest'
      x-ogen-operation-group: manage
  /v1/manage/talksessions/{talkSessionID}/analysis/report:
    get:
      operationId: getAnalysisReportManage
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnalysisReportResponse'
      tags:
        - manage
      x-ogen-operation-group: manage
    post:
      operationId: toggleReportVisibilityManage
      parameters:
        - name: talkSessionID
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToggleReportVisibilityResponse'
      tags:
        - manage
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ToggleReportVisibilityRequest'
      x-ogen-operation-group: manage
  /v1/manage/users/list:
    get:
      operationId: getUserListManage
      parameters:
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
        - name: search
          in: query
          required: false
          schema:
            type: string
          explode: false
        - name: orderBy
          in: query
          required: false
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - displayName
              - lastLoginAt
          explode: false
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum:
              - asc
              - desc
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserForManage'
      tags:
        - manage
      x-ogen-operation-group: manage
  /v1/manage/users/stats/list:
    get:
      operationId: getUserStatsListManage
      parameters:
        - name: range
          in: query
          required: true
          schema:
            type: string
          explode: false
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            format: int32
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserStatsResponse'
      tags:
        - manage
      x-ogen-operation-group: manage
  /v1/manage/users/stats/total:
    get:
      operationId: getUserStatsTotalManage
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStatsResponse'
      tags:
        - manage
      x-ogen-operation-group: manage
security:
  - CookieAuth: []
components:
  schemas:
    ActionItem:
      type: object
      required:
        - actionItemID
        - sequence
        - content
        - status
        - createdAt
        - updatedAt
      properties:
        actionItemID:
          type: string
        sequence:
          type: integer
        content:
          type: string
        status:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
    AnalysisReportResponse:
      type: object
      properties:
        report:
          type: string
          description: レポート本文
    Conclusion:
      type: object
      required:
        - user
        - content
      properties:
        user:
          allOf:
            - $ref: '#/components/schemas/User'
          description: 作成ユーザー
        content:
          type: string
          description: 結論本文
    CookieAuth:
      type: object
      required:
        - type
        - in
        - name
      properties:
        type:
          type: string
          enum:
            - apiKey
          description: API key authentication
        in:
          type: string
          enum:
            - cookie
          description: location of the API key
        name:
          type: string
          enum:
            - SessionId
          description: name of the API key
      description: Cookie-based authentication using JWT tokens stored in secure HTTP-only cookies
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
        message:
          type: string
    Location:
      type: object
      properties:
        latitude:
          type: number
          description: 緯度
        longitude:
          type: number
          description: 経度
    OffsetPagination:
      type: object
      required:
        - totalCount
        - offset
        - limit
      properties:
        totalCount:
          type: integer
        offset:
          type: integer
        limit:
          type: integer
    Opinion:
      type: object
      required:
        - id
        - content
        - postedAt
        - isDeleted
      properties:
        id:
          type: string
          description: 意見ID
        title:
          type: string
        content:
          type: string
          minLength: 1
          maxLength: 140
          description: 意見のテキスト
        parentID:
          type: string
          description: 親の意見ID。ルートならば無し
        voteType:
          allOf:
            - $ref: '#/components/schemas/VoteType'
          nullable: true
          description: 意見投稿主の意見。ルート意見の場合はここには何も入らない
        pictureURL:
          type: string
          nullable: true
          description: 画像が返る場合もある
        referenceURL:
          type: string
          description: 参考文献URL
        postedAt:
          type: string
        isDeleted:
          type: boolean
    OpinionGroupRatio:
      type: object
      required:
        - agreeCount
        - disagreeCount
        - passCount
        - groupID
        - groupName
      properties:
        agreeCount:
          type: integer
        disagreeCount:
          type: integer
        passCount:
          type: integer
        groupID:
          type: integer
        groupName:
          type: string
    OpinionWithReplyAndVote:
      type: object
      required:
        - opinion
        - user
        - replyCount
      properties:
        opinion:
          $ref: '#/components/schemas/Opinion'
        user:
          $ref: '#/components/schemas/User'
        replyCount:
          type: integer
        myVoteType:
          allOf:
            - $ref: '#/components/schemas/VoteType'
          nullable: true
      description: 意見とリプライ数と投票情報を含むレスポンス
    OpinionWithReplyCount:
      type: object
      required:
        - opinion
        - user
        - replyCount
      properties:
        opinion:
          $ref: '#/components/schemas/Opinion'
        user:
          $ref: '#/components/schemas/User'
        replyCount:
          type: integer
      description: 意見とリプライ数を含むレスポンス
    OpinionWithUser:
      type: object
      required:
        - opinion
        - user
      properties:
        opinion:
          $ref: '#/components/schemas/Opinion'
        user:
          $ref: '#/components/schemas/User'
      description: 意見とユーザー情報を含む基本レスポンス
    OpinionWithVote:
      type: object
      required:
        - opinion
        - user
      properties:
        opinion:
          $ref: '#/components/schemas/Opinion'
        user:
          $ref: '#/components/schemas/User'
        myVoteType:
          allOf:
            - $ref: '#/components/schemas/VoteType'
          nullable: true
      description: 意見と投票情報を含むレスポンス
    Organization:
      type: object
      required:
        - ID
        - name
        - code
        - type
        - roleName
        - role
      properties:
        ID:
          type: string
          description: 組織ID
        name:
          type: string
          description: 組織名
        code:
          type: string
          description: 組織コード
        type:
          type: integer
          description: 組織のタイプ
        roleName:
          type: string
        role:
          type: integer
          description: ロール
    PolicyConsentStatus:
      type: object
      required:
        - policyVersion
        - consentGiven
      properties:
        policyVersion:
          type: string
          description: 最新ポリシーのバージョン
        consentedAt:
          type: string
          nullable: true
          description: 同意した日時
        consentGiven:
          type: boolean
          description: 同意したか
    RegenerateRequest:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            - report
            - group
            - image
          description: 再生成するタイプ
    RegenerateResponse:
      type: object
      required:
        - status
        - message
      properties:
        status:
          type: string
          description: ステータス
        message:
          type: string
          description: メッセージ
    Report:
      type: object
      required:
        - talkSessionID
        - content
      properties:
        talkSessionID:
          type: string
        content:
          type: string
          description: レポート本文
    ReportAction:
      type: string
      enum:
        - deleted
        - hold
      description: 通報解決アクション
    ReportDetail:
      type: object
      required:
        - opinion
        - user
        - status
        - reasons
        - reportCount
      properties:
        opinion:
          $ref: '#/components/schemas/Opinion'
        user:
          allOf:
            - $ref: '#/components/schemas/User'
          description: 作成ユーザー
        status:
          $ref: '#/components/schemas/ReportStatus'
        reasons:
          type: array
          items:
            type: object
            properties:
              reason:
                type: string
              content:
                type: string
                nullable: true
            required:
              - reason
        reportCount:
          type: integer
          description: この意見が通報を受けた回数
    ReportReason:
      type: object
      required:
        - reasonID
        - reason
      properties:
        reasonID:
          type: integer
          description: '1'
        reason:
          type: string
          description: 不適切な内容
    ReportStatus:
      type: string
      enum:
        - unsolved
        - deleted
        - hold
      description: 通報ステータス
    Restriction:
      type: object
      required:
        - key
        - description
      properties:
        key:
          type: string
        description:
          type: string
        dependsOn:
          type: array
          items:
            type: string
          description: 依存しているrestriction
    Success:
      type: object
      required:
        - message
      properties:
        message:
          type: string
    TalkSession:
      type: object
      required:
        - id
        - theme
        - owner
        - createdAt
        - scheduledEndTime
        - restrictions
        - hideReport
      properties:
        id:
          type: string
          description: トークセッションID
        theme:
          type: string
          description: テーマ
        description:
          type: string
          nullable: true
          description: 説明
        owner:
          allOf:
            - $ref: '#/components/schemas/User'
          description: 作成ユーザー
        createdAt:
          type: string
          description: 作成日時
        scheduledEndTime:
          type: string
          description: 終了予定日時
        location:
          allOf:
            - $ref: '#/components/schemas/Location'
          description: 位置情報
        city:
          type: string
          nullable: true
          description: 市区町村
        prefecture:
          type: string
          nullable: true
          description: 都道府県
        thumbnailURL:
          type: string
          nullable: true
          description: サムネ画像
        restrictions:
          type: array
          items:
            $ref: '#/components/schemas/Restriction'
          description: セッションの参加制限
        hideReport:
          type: boolean
    TalkSessionForManage:
      type: object
      required:
        - talkSessionID
        - theme
        - description
        - owner
        - scheduledEndTime
        - thumbnailURL
        - hidden
        - updatedAt
        - createdAt
      properties:
        talkSessionID:
          type: string
        theme:
          type: string
        description:
          type: string
        owner:
          $ref: '#/components/schemas/UserForManage'
        scheduledEndTime:
          type: string
          format: date-time
        city:
          type: string
        prefecture:
          type: string
        thumbnailURL:
          type: string
        hidden:
          type: boolean
        updatedAt:
          type: string
        createdAt:
          type: string
    TalkSessionListResponse:
      type: object
      required:
        - talkSessionStats
        - totalCount
      properties:
        talkSessionStats:
          type: array
          items:
            $ref: '#/components/schemas/TalkSessionStats'
        totalCount:
          type: integer
          format: int32
    TalkSessionStats:
      type: object
      required:
        - talkSessionID
        - theme
        - description
        - owner
        - scheduledEndTime
        - thumbnailURL
        - hidden
        - updatedAt
        - createdAt
        - opinionCount
        - opinionUserCount
        - voteCount
        - voteUserCount
      properties:
        talkSessionID:
          type: string
        theme:
          type: string
        description:
          type: string
        owner:
          $ref: '#/components/schemas/UserForManage'
        scheduledEndTime:
          type: string
          format: date-time
        city:
          type: string
        prefecture:
          type: string
        thumbnailURL:
          type: string
        hidden:
          type: boolean
        updatedAt:
          type: string
        createdAt:
          type: string
        opinionCount:
          type: integer
          format: int32
        opinionUserCount:
          type: integer
          format: int32
        voteCount:
          type: integer
          format: int32
        voteUserCount:
          type: integer
          format: int32
    ToggleReportVisibilityRequest:
      type: object
      required:
        - hidden
      properties:
        hidden:
          type: boolean
          description: 非表示にするかどうか
    ToggleReportVisibilityResponse:
      type: object
      required:
        - status
        - message
      properties:
        status:
          type: string
          description: ステータス
        message:
          type: string
          description: メッセージ
    TokenClaim:
      type: object
      required:
        - aud
        - exp
        - iat
        - iss
        - sub
        - jti
        - isRegistered
        - isEmailVerified
        - requiredPasswordChange
      properties:
        aud:
          type: string
          description: Audience
        exp:
          type: string
          description: 有効期限
        iat:
          type: string
          description: 発行日時
        iss:
          type: string
          description: 発行者
        sub:
          type: string
          description: ユーザID
        jti:
          type: string
          description: JWT ID
        displayID:
          type: string
          description: ユーザーID
        displayName:
          type: string
          description: ユーザー名
        iconURL:
          type: string
          description: アイコンURL
        isRegistered:
          type: boolean
          description: ユーザ登録済みか
        isEmailVerified:
          type: boolean
        orgType:
          type: integer
          nullable: true
          description: アカウントの種類。組織がなければ空
        requiredPasswordChange:
          type: boolean
          description: パスワードの更新が必要かどうか
        organizationRole:
          type: string
          nullable: true
          description: 組織のRole
        organizationCode:
          type: string
          nullable: true
          description: |-
            組織コード
            ログイン時に使用する
        organizationID:
          type: string
          nullable: true
          description: 組織ID
    User:
      type: object
      required:
        - displayID
        - displayName
      properties:
        displayID:
          type: string
          minLength: 3
          maxLength: 25
          pattern: ^[A-Za-z0-9]$
        displayName:
          type: string
        iconURL:
          type: string
          nullable: true
    UserDemographics:
      type: object
      properties:
        dateOfBirth:
          type: integer
          nullable: true
          description: 生年月日
          title: '20001010'
        gender:
          type: string
          nullable: true
          description: 性別
          title: 性別
        city:
          type: string
          nullable: true
          description: 市町村
          title: 市町村
        prefecture:
          type: string
          nullable: true
          description: 都道府県
          title: 都道府県
    UserForManage:
      type: object
      required:
        - userID
        - displayID
        - displayName
        - iconURL
        - lastLoginAt
        - createdAt
        - updatedAt
      properties:
        userID:
          type: string
          description: ユーザーID
        displayID:
          type: string
          description: 表示ID
        displayName:
          type: string
          description: 表示名
        iconURL:
          type: string
          description: アイコンURL
        lastLoginAt:
          type: string
          format: date-time
          description: 最終ログイン日時
        createdAt:
          type: string
          format: date-time
          description: 作成日時
        updatedAt:
          type: string
          format: date-time
          description: 更新日時
    UserGroupPosition:
      type: object
      required:
        - posX
        - posY
        - displayID
        - displayName
        - groupName
        - groupID
      properties:
        posX:
          type: number
        posY:
          type: number
        displayID:
          type: string
        displayName:
          type: string
        iconURL:
          type: string
          nullable: true
        groupName:
          type: string
        groupID:
          type: integer
        perimeterIndex:
          type: integer
          description: 境界ポイントのインデックス
    UserStatsResponse:
      type: object
      required:
        - uniqueActionUserCount
        - userCount
        - talkSessionCount
        - date
      properties:
        uniqueActionUserCount:
          type: integer
          format: int32
          description: ユニークアクション数
        userCount:
          type: integer
          format: int32
          description: 登録ユーザー数
        talkSessionCount:
          type: integer
          format: int32
          description: セッション数
        date:
          type: string
          format: date-time
          description: 日付
    ValidationErrorItem:
      type: object
      required:
        - field
        - message
      properties:
        field:
          type: string
          description: バリデーションエラーのフィールド
        message:
          type: string
          description: バリデーションエラーメッセージ
    VoteType:
      type: string
      enum:
        - agree
        - disagree
        - pass
      description: 投票タイプ
  securitySchemes:
    CookieAuth:
      type: apiKey
      in: cookie
      name: SessionId
      description: Cookie-based authentication using JWT tokens stored in secure HTTP-only cookies
